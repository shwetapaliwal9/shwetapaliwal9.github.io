(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{31:function(e,t,a){e.exports=a(64)},40:function(e,t,a){},48:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){},56:function(e,t,a){},58:function(e,t,a){},60:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(25),i=a.n(r),c=a(6),l=(a(40),a(9)),o=a(15),u=a(17),m=a(28),d=localStorage.getItem("likedRestaurants"),v={cities:["Bengaluru","Delhi","Pune","Mumbai","Hyderabad"],restaurantsList:{restaurants:[],results_found:0,results_start:0,results_shown:0},restaurantDetails:null,restaurantReviews:{user_reviews:[],review_count:0,review_shown:0,review_start:0},totalReviews:{totalUser_reviews:[],totalReview_count:0,totalReview_shown:0,totalReview_start:0},likedRestaurants:d=d?JSON.parse(d):[]};var p=Object(u.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,a=[],s=[];switch(t.type){case"RESTAURANTS_LIST_FETCHED":var n=Object(o.a)(e.restaurantsList.restaurants).concat(Object(o.a)(t.data.restaurants));return n.forEach(function(t){var a=t.restaurant.R.res_id,s=!1;e.likedRestaurants.indexOf(a)>=0&&(s=!0),t.isLiked=s}),Object(l.a)({},e,{restaurantsList:{restaurants:n,results_found:t.data.results_found,results_start:t.data.results_start,results_shown:t.data.results_shown},restaurantDetails:null,restaurantReviews:v.restaurantReviews});case"RESTAURANT_DETAILS_FETCHED":var r=t.data;return e.likedRestaurants.indexOf(r.R.res_id)>=0?r.isLiked=!0:r.isLiked=!1,Object(l.a)({},e,{restaurantDetails:r,totalReviews:v.totalReviews});case"RESTAURANT_REVIEWS_FETCHED":return Object(l.a)({},e,{restaurantReviews:{user_reviews:t.data.user_reviews,review_count:t.data.reviews_count,review_start:t.data.reviews_start,review_shown:t.data.reviews_shown}});case"RESTAURANT_TOTAL_REVIEWS_FETCHED":return Object(l.a)({},e,{totalReviews:{totalUser_reviews:t.data.user_reviews,totalReview_count:t.data.reviews_count,totalReview_shown:t.data.reviews_start,totalReview_start:t.data.reviews_shown}});case"ADD_TO_LIKED":return a=Object(o.a)(e.restaurantsList.restaurants),s=e.likedRestaurants,e.likedRestaurants.indexOf(t.data<0)&&(s=Object(o.a)(s).concat([t.data])),a.forEach(function(e){var t=e.restaurant.R.res_id,a=!1;s.indexOf(t)>=0&&(a=!0),e.isLiked=a}),Object(l.a)({},e,{restaurantsList:Object(l.a)({},e.restaurantsList,{restaurants:a}),likedRestaurants:s});case"REMOVE_FROM_LIKED":a=Object(o.a)(e.restaurantsList.restaurants),s=Object(o.a)(e.likedRestaurants);var i=e.likedRestaurants.indexOf(t.data);return i>=0?(s.splice(i,1),a.forEach(function(e){var t=e.restaurant.R.res_id,a=!1;s.indexOf(t)>=0&&(a=!0),e.isLiked=a}),Object(l.a)({},e,{restaurantsList:Object(l.a)({},e.restaurantsList,{restaurants:a}),likedRestaurants:s})):e;default:return e}},Object(u.a)(m.a));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var f=a(67),E=a(66),b=a(10),h=a(11),g=a(13),w=a(12),_=a(14),O=a(5),R=function(e){return{updateName:function(t){e({type:"name-type",data:t})}}},j=function(e){return{cities:e.cities}},k=a(68),N=a(7),y=a.n(N),L=(a(48),function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(w.a)(t).call(this,e))).onClickHandler=a.onClickHandler.bind(Object(O.a)(Object(O.a)(a))),a}return Object(_.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(t){var a=t.coords.latitude,s=t.coords.longitude;a&&s&&e.getCityData(a,s)})}},{key:"getCityData",value:function(e,t){var a=this;y.a.get("https://developers.zomato.com/api/v2.1/cities?lat=".concat(e,"&lon=").concat(t)).set("user-key","fa81a3f97323eba13d8713d3284b8556").then(function(e){var t=e.body.location_suggestions[0].name,s=e.body.location_suggestions[0].id;a.props.history.push("/listing/".concat(t,"/").concat(s))})}},{key:"onClickHandler",value:function(e){var t=this;y.a.get("https://developers.zomato.com/api/v2.1/cities?q=".concat(e)).set("user-key","fa81a3f97323eba13d8713d3284b8556").then(function(a){var s=a.body.location_suggestions[0].id;t.props.history.push("/listing/".concat(e,"/").concat(s))})}},{key:"render",value:function(){var e=this,t=this.props.cities.map(function(t,a){return n.a.createElement("li",{key:a,onClick:function(){return e.onClickHandler(t)}},n.a.createElement("button",{className:"btn"},t))});return n.a.createElement("div",{class:"container"},n.a.createElement("div",{className:"cityList-container container"},n.a.createElement("h3",{className:"heading"},"Select your City"),n.a.createElement("ul",{className:"cityList"},t)))}}]),t}(s.Component)),T=Object(k.a)(Object(c.b)(j,R)(L)),D=function(e){return{getRestaurantDetails:function(t){e(function(e){y.a.get("https://developers.zomato.com/api/v2.1/restaurant?res_id=".concat(t)).set("user-key","fa81a3f97323eba13d8713d3284b8556").then(function(t){e({type:"RESTAURANT_DETAILS_FETCHED",data:t.body})})})},getRestaurantReviews:function(t){e(function(e){y.a.get("https://developers.zomato.com/api/v2.1/reviews?res_id=".concat(t,"&count=10&start=20")).set("user-key","fa81a3f97323eba13d8713d3284b8556").then(function(t){e({type:"RESTAURANT_REVIEWS_FETCHED",data:t.body})})})}}},S=a(2),I=function(e){return{details:e.restaurantDetails,reviews:Object(S.get)(e.restaurantReviews,"user_reviews"),review_count:e.restaurantReviews.review_count,review_start:e.restaurantReviews.review_start,review_shown:e.restaurantReviews.review_shown}},C=(a(52),a(65)),A=(a(54),function(){return n.a.createElement("div",null,n.a.createElement("div",{className:"spinner"}))}),H=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){window.scrollTo(0,0);var e=this.props.match.params.restId;this.props.getRestaurantDetails(parseInt(e,10)),this.props.getRestaurantReviews(parseInt(e,10))}},{key:"render",value:function(){if(!this.props.details)return n.a.createElement(A,null);var e=this.props.match.params.restId,t=this.props.details,a=this.props.reviews,s=this.props.review_count,r=Object(S.get)(t,"featured_image"),i=Object(S.get)(t,"name"),c=Object(S.get)(t,"user_rating.aggregate_rating"),l=Object(S.get)(t,"user_rating.votes"),o=(Object(S.get)(s,"review_count"),Object(S.get)(t,"location.locality_verbose")),u=Object(S.get)(t,"location.address"),m=Object(S.get)(t,"cuisines"),d=Object(S.get)(t,"average_cost_for_two"),v=Object(S.get)(t,"currency"),p=a.map(function(e,t){for(var a=Object(S.get)(e,"review.user.profile_image"),s=Object(S.get)(e,"review.user.name"),r=Object(S.get)(e,"review.rating"),i=Object(S.get)(e,"review.review_text"),c=5-r,l=[],o=0;o<r;o++)l.push(n.a.createElement("i",{class:"fas fa-star"}));for(o=0;o<c;o++)l.push(n.a.createElement("i",{class:"far fa-star"}));return n.a.createElement("li",{key:t},n.a.createElement("img",{className:"user-image",src:a}),n.a.createElement("div",{className:"reviews-info"},n.a.createElement("h4",{className:"user-name"},s),n.a.createElement("span",{className:"stars"},l),n.a.createElement("p",{className:"review-text"},i)))});return n.a.createElement("div",{className:"container resto-details-ctn",key:e},n.a.createElement("img",{className:"details-img",src:r}),n.a.createElement("div",{className:"resto-info"},n.a.createElement("h4",{className:"resto-name"},i),this.props.details.isLiked&&n.a.createElement("div",null,n.a.createElement("i",{class:"details-liked fas fa-heart"}),n.a.createElement("span",{className:"likedText"},"Liked")),n.a.createElement("div",{className:"rating-info"},n.a.createElement("span",{className:"resto-rating"},n.a.createElement("span",{class:"stars"},n.a.createElement("i",{className:"fas fa-star"})),c),n.a.createElement("span",{className:"resto-vote"},"(",l,") votes"),n.a.createElement("span",{className:"review-count"},s," Reviews")),n.a.createElement("div",{className:"cuisine-info"},n.a.createElement("span",{className:"cuisine-items"},m),n.a.createElement("span",{className:"cost"},v,d," for two")),n.a.createElement("button",{className:"share-btn"},n.a.createElement("i",{class:"fas fa-share"}),"  Share"),n.a.createElement("div",{className:"resto-address"},n.a.createElement("div",{class:"info"},o),n.a.createElement("div",{class:"a-info"},u)),n.a.createElement("div",{className:"btn-section"},n.a.createElement("button",{className:"btn"},n.a.createElement("span",{class:"btn-icon"},n.a.createElement("i",{class:"fas fa-camera"})),"Photos"),n.a.createElement("button",{className:"btn"},n.a.createElement("span",{class:"btn-icon"},n.a.createElement("i",{class:"fas fa-utensils"})),"Menu")),n.a.createElement("div",{className:"reviews"},n.a.createElement("h4",{className:"head"},"Ratings:"),n.a.createElement("ul",null,p),n.a.createElement("div",null,n.a.createElement(C.a,{to:"/Reviews/".concat(e)},n.a.createElement("button",{className:"more-btn"},n.a.createElement("i",{class:"fas fa-pen"}),"  More reviews..."))))))}}]),t}(s.Component),M=Object(k.a)(Object(c.b)(I,D)(H)),x=function(e){return{getRestaurantsData:function(t,a,s){e(function(e){y.a.get("https://developers.zomato.com/api/v2.1/search?entity_id=".concat(s,"&entity_type=city&start=").concat(t,"&count=").concat(a)).set("user-key","fa81a3f97323eba13d8713d3284b8556").then(function(t){console.log(t),e({type:"RESTAURANTS_LIST_FETCHED",data:t.body})})})},addToLiked:function(t){e({type:"ADD_TO_LIKED",data:t})},removeFromLiked:function(t){e({type:"REMOVE_FROM_LIKED",data:t})}}},F=function(e){return{restaurants:Object(S.get)(e.restaurantsList,"restaurants",[]),result_start:Object(S.get)(e.restaurantsList,"results_start"),result_found:Object(S.get)(e.restaurantsList,"results_found"),result_shown:Object(S.get)(e.restaurantsList,"results_shown")}};a(56);var U=function(e){console.log(e);var t=localStorage.getItem("likedRestaurants");if(t)(t=JSON.parse(t)).indexOf(e)<0&&(t.push(e),localStorage.setItem("likedRestaurants",JSON.stringify(t)));else{var a=[e];localStorage.setItem("likedRestaurants",JSON.stringify(a))}};var J=function(e){console.log(e);var t=localStorage.getItem("likedRestaurants");if(t){var a=(t=JSON.parse(t)).indexOf(e);a>=0&&(t.splice(a,1),localStorage.setItem("likedRestaurants",JSON.stringify(t)))}},z=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(w.a)(t).call(this,e))).loadMoreResult=a.loadMoreResult.bind(Object(O.a)(Object(O.a)(a))),a.intersectionCallback=a.intersectionCallback.bind(Object(O.a)(Object(O.a)(a))),a.likeHandler=a.likeHandler.bind(Object(O.a)(Object(O.a)(a))),a.unLikeHandler=a.unLikeHandler.bind(Object(O.a)(Object(O.a)(a))),a}return Object(_.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.cityId;this.props.getRestaurantsData(0,10,parseInt(e,10));var t=new IntersectionObserver(this.intersectionCallback,{rootMargin:"200px",threshold:.5}),a=document.querySelector("#listMoreLoader");t.observe(a)}},{key:"intersectionCallback",value:function(e){e[0].intersectionRatio>0&&this.loadMoreResult()}},{key:"loadMoreResult",value:function(){var e=this.props.result_start+this.props.result_shown;this.props.result_found>e&&this.props.getRestaurantsData(e,10)}},{key:"likeHandler",value:function(e,t){e.preventDefault(),e.stopPropagation(),U(t),this.props.addToLiked(t)}},{key:"unLikeHandler",value:function(e,t){e.preventDefault(),e.stopPropagation(),J(t),this.props.removeFromLiked(t)}},{key:"render",value:function(){var e=this,t=this.props.match.params.cityName,a=this.props.restaurants.map(function(t,a){var s=Object(S.get)(t,"restaurant.featured_image"),r=Object(S.get)(t,"restaurant.name"),i=Object(S.get)(t,"restaurant.user_rating.aggregate_rating"),c=Object(S.get)(t,"restaurant.user_rating.votes"),l=Object(S.get)(t,"restaurant.location.locality_verbose"),o=Object(S.get)(t,"restaurant.location.address"),u=Object(S.get)(t,"restaurant.R.res_id"),m=Object(S.get)(t,"restaurant.cuisines");return s?n.a.createElement("li",{key:a},n.a.createElement(C.a,{to:"/details/".concat(u)},n.a.createElement("img",{className:"resto-image",src:s}),n.a.createElement("div",{className:"resto-details"},n.a.createElement("h4",{className:"resto-name"},r),n.a.createElement("h5",{className:"resto-cuisine"},m),n.a.createElement("h4",{className:"locality"},l),n.a.createElement("address",null,o),n.a.createElement("div",null,n.a.createElement("span",{className:"resto-rating"},n.a.createElement("span",{className:"star"},n.a.createElement("i",{class:"fas fa-star"})),i),n.a.createElement("span",{className:"resto-votes"},"(",c," votes)"),t.isLiked?n.a.createElement("button",{className:"unlike-btn",onClick:function(t){return e.unLikeHandler(t,u)}},n.a.createElement("span",{className:"filled-heart"},n.a.createElement("i",{className:"fas fa-heart"})," Liked")):n.a.createElement("button",{onClick:function(t){return e.likeHandler(t,u)},className:"like-btn"},n.a.createElement("span",{className:"unfilled-heart"},n.a.createElement("i",{className:"far fa-heart"})),"Like"))),n.a.createElement("div",{className:"clear"}))):null});return n.a.createElement("div",{className:"container"},n.a.createElement("h2",{className:"heading-title"},"Showing restaurants in: ",n.a.createElement("b",null,t)),n.a.createElement("ul",{className:"resto-list"},a),n.a.createElement("div",{id:"listMoreLoader"},n.a.createElement(A,null)))}}]),t}(s.Component),V=Object(k.a)(Object(c.b)(F,x)(z)),W=(a(58),function(){return n.a.createElement("header",null,n.a.createElement("a",{href:"/"},n.a.createElement("h1",{className:"header-title"},"Restaurant",n.a.createElement("span",{className:"header-title-2"}," Finder")),n.a.createElement("span",{className:"header-icon"},n.a.createElement("i",{class:"fas fa-cookie-bite"}))))}),P=function(e){return{getAllRestaurantReviews:function(t){e(function(e){y.a.get("https://developers.zomato.com/api/v2.1/reviews?res_id=".concat(t,"&count=10&start=20")).set("user-key","fa81a3f97323eba13d8713d3284b8556").then(function(t){e({type:"RESTAURANT_TOTAL_REVIEWS_FETCHED",data:t.body})})})}}},K=function(e){return{totalReviews:Object(S.get)(e.totalReviews,"totalUser_reviews"),totalReview_count:e.totalReviews.totalReview_count,totalReview_start:e.totalReviews.totalReview_start,totalReview_shown:e.totalReviews.totalReview_shown}},B=(a(60),function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.restId;this.props.getAllRestaurantReviews(parseInt(e,10))}},{key:"render",value:function(){if(0===this.props.totalReviews.length)return n.a.createElement(A,null);var e=this.props.totalReviews,t=(this.props.totalReview_count,e.map(function(e,t){for(var a=Object(S.get)(e,"review.user.profile_image"),s=Object(S.get)(e,"review.user.name"),r=Object(S.get)(e,"review.rating"),i=Object(S.get)(e,"review.review_text"),c=5-r,l=[],o=0;o<r;o++)l.push(n.a.createElement("i",{className:"fas fa-star"}));for(o=0;o<c;o++)l.push(n.a.createElement("i",{className:"far fa-star"}));return n.a.createElement("li",{key:t},n.a.createElement("img",{className:"user-image",src:a}),n.a.createElement("div",{className:"reviews-info"},n.a.createElement("h4",{className:"user-name"},s),n.a.createElement("span",{className:"stars"},l),n.a.createElement("p",{className:"review-text"},i)))}));return n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"reviews"},n.a.createElement("h4",{className:"head"},"Ratings:"),n.a.createElement("ul",null,t)))}}]),t}(s.Component)),q=Object(k.a)(Object(c.b)(K,P)(B)),$=function(){return n.a.createElement(f.a,null,n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(W,null)),n.a.createElement(E.a,{path:"/",exact:!0,component:T}),n.a.createElement(E.a,{path:"/listing/:cityName/:cityId",component:V}),n.a.createElement(E.a,{path:"/details/:restId",component:M}),n.a.createElement(E.a,{path:"/Reviews/:restId",component:q})))};a(62);i.a.render(n.a.createElement(c.a,{store:p},n.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[31,2,1]]]);
//# sourceMappingURL=main.66580dbf.chunk.js.map